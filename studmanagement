CREATE DATABASE IF NOT EXISTS studentmanagementsystem;
use studentmanagementsystem;

CREATE TABLE Students (
    student_id INT PRIMARY KEY ,
    student_name VARCHAR(100) NOT NULL,
    department VARCHAR(50),
    email VARCHAR(100)
);

CREATE TABLE Courses (
    course_id INT PRIMARY KEY ,
    course_name VARCHAR(100) NOT NULL,
    department VARCHAR(50)
);

CREATE TABLE Enrollments (
    enrollment_id INT PRIMARY KEY ,
    student_id INT,
    course_id INT,
    grade CHAR(1),
    FOREIGN KEY (student_id) REFERENCES Students(student_id),
    FOREIGN KEY (course_id) REFERENCES Courses(course_id)
);

INSERT INTO Students (student_id,student_name, department, email) VALUES
(1,'Satyam Kadam', 'Computer Science', 'satyam@example.com'),
(2,'Riya Patel', 'Information Technology', 'riya@example.com'),
(3,'Amit Sharma', 'Computer Science', 'amit@example.com'),
(4,'Neha Singh', 'Electronics', 'neha@example.com');

INSERT INTO Courses (course_id,course_name, department) VALUES
(1,'Database Systems', 'Computer Science'),
(2,'Operating Systems', 'Computer Science'),
(3,'Data Structures', 'Information Technology'),
(4,'Digital Electronics', 'Electronics');

INSERT INTO Enrollments (enrollment_id,student_id, course_id, grade) VALUES
(21,1, 1, 'A'),
(22,2, 1, 'B'),
(33,3, 2, 'A'),
(44,1, 3, 'B'),
(55,4, 4, 'A');

-- Query Execution
--1
SELECT student_id, student_name, department
FROM Students;

--2
SELECT s.student_name, s.department, c.course_name
FROM Students s
JOIN Enrollments e ON s.student_id = e.student_id
JOIN Courses c ON e.course_id = c.course_id
WHERE c.course_name = 'Database Systems';

--3
UPDATE Enrollments
SET grade = 'A'
WHERE student_id = 2 AND course_id = 1;

SELECT s.student_name, c.course_name, e.grade
FROM Enrollments e
JOIN Students s ON e.student_id = s.student_id
JOIN Courses c ON e.course_id = c.course_id
WHERE s.student_name = 'Riya Patel';

--4
SELECT s.student_name, s.department, c.course_name, e.grade
FROM Students s
JOIN Enrollments e ON s.student_id = e.student_id
JOIN Courses c ON e.course_id = c.course_id
WHERE e.grade = 'A';

--5
SELECT c.course_name, COUNT(e.student_id) AS total_students
FROM Courses c
LEFT JOIN Enrollments e ON c.course_id = e.course_id
GROUP BY c.course_name;
